{"version":3,"sources":["components/Layout.js","lib/changelog.js","lib/markdown.js","components/Homepage.js","components/Schema.js","components/Changelog.js","components/Search.js","index.js"],"names":["savedRoute","searchq","setSearch","value","trim","route","set","current","m","get","startsWith","encodeURI","module","exports","vnode","attrs","q","bundlePromise","bundle","then","redraw","href","arr","oncreate","link","class","placeholder","style","oninput","withAttr","allmodels","Object","keys","models","filter","mk","model","path","length","map","name","omodels","push","concat","isLocal","meta","version","children","window","location","hostname","changelogUrl","changelog","request","data","converter","showdown","Converter","text","makeHtml","changelogLib","require","markdown","load","modelViewPath","modelId","root","submodels","forEach","mod","parent","schema","sm","slice","tag","changes","ch","trust","render","currentId","schemaCache","exampleCache","example","id","title","p","out","description","properties","pk","po","type","JSON","stringify","searchResult","currentq","searching","sObject","$id","res","pv","re","RegExp","match","property","cr","ccr","join","items","searchModel","doSearch","log","r","highlight","str","replace","s","sr","Layout","Homepage","Schema","Changelog","Search","document","getElementById","bundleUrl","loadedBundle","loadingBundle","Promise","resolve","background"],"mappings":"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","file":"src.fef25828.map","sourceRoot":"../src","sourcesContent":["\nlet savedRoute = null\nlet searchq = null\n\nconst setSearch = (value) => {\n  searchq = value\n  value = value.trim()\n  if (value === \"\") {\n    if (savedRoute) {\n      m.route.set(savedRoute)\n    }\n    return null\n  }\n  const current = m.route.get()\n  if (!current.startsWith('/search/') || savedRoute === null) {\n    savedRoute = current\n  }\n  m.route.set(`/search/${encodeURI(value)}`)\n}\n\nmodule.exports = {\n  oninit: (vnode) => {\n    if (vnode.attrs.q) {\n      searchq = vnode.attrs.q\n    }\n    this.bundlePromise = vnode.attrs.bundle()\n    this.bundlePromise.then((bundle) => {\n      this.bundle = bundle\n      m.redraw()\n    })\n  },\n  onupdate: (vnode) => {\n    if (searchq) {\n      setTimeout(() => {\n        if (!m.route.get().startsWith('/search/')) {\n          searchq = ''\n          m.redraw()\n        }\n      }, 100)\n    }\n  },\n  view: (vnode) => {\n    return m('div', [\n      m('div', { 'style': 'padding-bottom: 5em;' },  [\n        m('nav#navbar.navbar', [\n          m('.container', [\n            m('.navbar-brand', [\n              m('a.navbar-item', { href: 'https://data.opencrypto.io/' }, [\n                m('#logo'),\n                m('#logo-text', [\n                  m('span.thin', 'Open'),\n                  'Crypto',\n                  m('span.green', 'Data'),\n                ])\n              ])\n            ]),\n            m('.navbar-menu', [\n              m('.navbar-start', [\n                m('a.navbar-item', { href: 'https://data.opencrypto.io' }, 'Homepage'), \n                m('a.navbar-item', { href: 'https://explorer.opencrypto.io' }, 'Explorer'), \n                m('a.navbar-item.current', { href: 'https://schema.opencrypto.io' }, 'Schema'), \n              ]),\n              m('.navbar-end', [\n                m('a.navbar-item', { href: '#' }, 'How to contribute?'), \n                m('a.navbar-item', { href: '#' }, 'FAQ'), \n              ])\n            ])\n          ])\n        ]),\n        m('nav#subbar.navbar', [\n          m('.container', [\n            m('.navbar-menu', [\n              m('.navbar-start', (() => {\n                let arr = [\n                  m('a.navbar-item.has-dropdown.is-hoverable', [\n                    m('a.navbar-link', 'Documentation'),\n                    m('.navbar-dropdown', [\n                      m('a.navbar-item', { href: '/', oncreate: m.route.link, class: m.route.get() === '/' ? 'selected' : null }, 'Introduction'),\n                      m('.navbar-divider'),\n                      m('a.navbar-item', { href: '/changelog', oncreate: m.route.link, class: m.route.get() === '/changelog' ? 'selected' : null }, 'Changelog'),\n                    ])\n                  ]),\n                  //m('span.navbar-item', { style: 'font-size: 8px; color: silver;'  }, ' ● '),\n                  m('.navbar-item', m('input.input.is-rounded', { placeholder: 'Search for prop ..', style: 'width: 10em;', oninput: m.withAttr('value', setSearch), value: searchq })),\n                  //m('span.navbar-item', { style: 'font-size: 8px; color: silver;'  }, ' ● '),\n                ]\n                if (!this.bundle) {\n                  return arr\n                }\n                let allmodels = Object.keys(this.bundle.models)\n                let models = allmodels.filter((mk) => {\n                  let model = this.bundle.models[mk]\n                  return model.path.length < 3\n                }).map(mk => {\n                  let model = this.bundle.models[mk]\n                  let href = `/model/${mk}`\n                  return m('a.navbar-item', { href, oncreate: m.route.link, class: m.route.get() === href ? 'selected' : null }, model.name)\n                })\n                //console.log(models)\n                let omodels = allmodels.filter(mk => {\n                  let model = this.bundle.models[mk]\n                  return model.path.length >= 3\n                })\n                if (omodels.length > 0) {\n                  models.push(m('.navbar-item.has-dropdown.is-hoverable', [\n                    m('a.navbar-link', 'Other models'),\n                    m('.navbar-dropdown', omodels.map(mk => {\n                      let model = this.bundle.models[mk]\n                      let href = `/model/${mk}`\n                      return m('a.navbar-item', { href, oncreate: m.route.link, class: m.route.get() === href ? 'selected' : null }, model.name)\n                    }))\n                  ]))\n                }\n                return arr.concat(models)\n              })()),\n              m('.navbar-end', (() => {\n                if (!this.bundle) {\n                  return null\n                }\n                return m('.navbar-item', [\n                  m('div.select.is-rounded', [\n                    m('select', [\n                      m('option', this.bundle.isLocal ? `v${this.bundle.meta.version} (local)` : `v${this.bundle.meta.version} (latest)`)\n                    ])\n                  ])\n                ])\n              })())\n            ])\n          ])\n        ]),\n        m('.container.page-content', function() {\n          if (true) {\n            return m('#page', vnode.children)\n          }\n          return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n        }())\n      ])\n    ])\n  }\n}\n","\nconst isLocal = window.location.hostname === 'localhost'\nconst changelogUrl = isLocal ?\n  '/schema/build/changelog.json' : 'https://schema.opencrypto.io/build/changelog.json'\n\nvar changelog = null\n\nmodule.exports = {\n  load () {\n    return m.request(changelogUrl).then((data) => {\n      return data\n    })\n  }\n}\n","const converter = new showdown.Converter()\n\nmodule.exports = {\n  render (text) {\n    return converter.makeHtml(text)\n  }\n}\n","\nconst changelogLib = require('../lib/changelog')\nconst markdown = require('../lib/markdown')\n\nconst isLocal = window.location.hostname === 'localhost'\nvar changelog = null\n\nmodule.exports = {\n  oninit: (vnode) => {\n    this.bundlePromise = vnode.attrs.bundle()\n    this.bundlePromise.then((bundle) => {\n      this.bundle = bundle\n      m.redraw()\n    })\n    changelogLib.load().then(data => {\n      changelog = data\n      m.redraw()\n    })\n  },\n  view: (vnode) => {\n    if (!this.bundle) {\n      return m('div', 'Loading')\n    }\n    let modelViewPath = (modelId, root = false) => {\n      let model = this.bundle.models[modelId]\n      let submodels = []\n      Object.keys(this.bundle.models).forEach((mod) => {\n        if (this.bundle.models[mod].parent === modelId) {\n          submodels.push(mod)\n        }\n      })\n      return m('li', [\n        !root ? m('i', { class: 'fa-li far fa-level-up', style: 'transform: rotate(90deg);' }) : null,\n        m('div', m('a', { href: `/model/${modelId}`, oncreate: m.route.link }, [\n          model.schema['fa-icon'] ? m('b', { class: 'far fa-'+model.schema['fa-icon'], style: 'margin-right: 0.5em; color: #808080;' }) : null,\n          model.name,\n        ])),\n        !submodels ? null : m('ul.fa-ul', { style: root ? 'margin-left: 3em;' : '' }, submodels.map((sm) => {\n          return modelViewPath(sm)\n        }))\n      ])\n    }\n\n    return m('#homepage', [\n      m('.level', [\n        m('.level-left', [\n          m('.title.is-3', [\n            m('b','OpenCrypto Schema'),\n            ` v${this.bundle.meta.version}`\n          ]),\n        ]),\n      ]),\n      m('.tile.is-parent', [\n        m('.tile.oc-box.is-5', [\n          m('.content', [\n            m('div', m('b', 'Models:')),\n            m('ul.schema-structure.main', Object.keys(this.bundle.models).map((mod) => {\n              if (this.bundle.models[mod].parent) {\n                return null\n              }\n              return modelViewPath(mod, true)\n            })),\n          ])\n        ]),\n        m('.tile', [\n          m('.content', [\n            m('.title.is-4', [\n              'Schemas for structured cryptocurrency-related data in ',\n              m('a', { href: 'https://json-schema.org/' }, 'JSON Schema'),\n              ' standard'\n            ]),\n            m('p', 'We created this schema, because we need normalized way how to create, transfer and store data about crypto-assets and related ecosystem.'),\n            m('p', 'Schema is divided to models by their purpose and it\\'s designed to be easy to understand and to encompass all data properties that is needed.'),\n            m('p', 'Open-sourced under MIT license.'),\n            m('p', [\n              'If you miss some property or have another issue to discuss, you can create a new ',\n              m('a', { href: 'https://github.com/opencrypto-io/schema/issues' }, 'Schema Issue'),\n              ' on GitHub.',\n            ]),\n            m('p', { style: 'margin-top: 2em; font-size: 1.2em;' }, [\n              m('a', { href: 'https://github.com/opencrypto-io/schema'}, [\n                m('i', { class: 'fab fa-github', style: 'margin-right: 0.5em;' }),\n                'GitHub repository',\n              ])\n            ])\n          ])\n        ]),\n      ]),\n      !changelog ? null : m('#changelog', [\n        m('.title.is-4', 'Changelog'),\n        changelog.slice(0,2).map(tag => {\n          if (!isLocal && tag.version === 'Unreleased') {\n            return null\n          }\n          return m('.content', [\n            m('.title.is-5', tag.version),\n            m('ul', tag.changes.map(ch => {\n              return m('li', m.trust(markdown.render(ch)))\n            }))\n          ])\n        }),\n        m('p', m('a', { href: '/changelog', oncreate: m.route.link }, 'Show full Changelog'))\n      ])\n      \n    ])\n  }\n}\n","var currentId = null\nvar schema = null\nvar schemaCache = {}\nvar exampleCache = {}\nvar example = null\n\nmodule.exports = {\n  oninit: (vnode) => {\n    this.bundlePromise = vnode.attrs.bundle()\n    this.bundlePromise.then((bundle) => {\n      this.bundle = bundle\n      this.model = this.bundle.models[vnode.attrs.id]\n      m.redraw()\n    })\n  },\n  onupdate: (vnode) => {\n    if (this.model && this.model.id !== vnode.attrs.id) {\n      this.model = this.bundle.models[vnode.attrs.id]\n      m.redraw()\n    }\n  },\n  view: (vnode) => {\n    if (!this.model) {\n      return m('div', 'Loading ...')\n    }\n    const schema = this.model.schema\n    return m('div', [\n      m('h2.my-title', [\n        schema['fa-icon'] ? m('i', { class: 'far fa-'+schema['fa-icon'], style: 'margin-right: 0.5em;' }) : null,\n        schema.title\n      ]),\n      m('.path', this.model.path.map(p => {\n        var out = [ m('a', { href: `/model/${p}`, oncreate: m.route.link }, this.bundle.models[p].name) ]\n        if (p !== this.model.id) {\n          out.push(m('b', { style: 'padding: 0 0.4em;' }, ' → '))\n        }\n        return out\n      })),\n      m('.description', schema.description), \n      m('.props', Object.keys(schema.properties).map(pk => {\n        let po = schema.properties[pk]\n        return m('.custom-box', [\n          m('div', [\n            m('b', pk),\n            m('span', '   '),\n            m('i', { style: 'padding-left: 0.5em; color: #999999;' }, '{' +po.type + '}')\n          ]),\n          po.title ? m('div', { style: 'color: #999999;' }, po.title + (po.description ? ' - ' + po.description : '')) : null,\n          this.model.example[pk] ? m('pre.example', JSON.stringify(this.model.example[pk], null, 2)) : null,\n        ])\n      }))\n    ])\n  }\n}\n","\nconst markdown = require('../lib/markdown')\nconst changelogLib = require('../lib/changelog')\n\nconst isLocal = window.location.hostname === 'localhost'\n\nvar changelog = null\n\nmodule.exports = {\n  oninit: (vnode) => {\n    this.bundlePromise = vnode.attrs.bundle()\n    this.bundlePromise.then((bundle) => {\n      this.bundle = bundle\n      m.redraw()\n    })\n    changelogLib.load().then(data => {\n      changelog = data\n      m.redraw()\n    })\n  },\n  view: (vnode) => {\n    if (!this.bundle || !changelog) {\n      return m('div', 'Loading ..')\n    }\n    return m('#changelog', [\n      m('.title.is-3', 'Changelog'),\n      changelog.map(tag => {\n        if (!isLocal && tag.version === 'Unreleased') {\n          return null\n        }\n        return m('.content', [\n          m('.title.is-5', m('a', { class: 'silent', href: `https://github.com/opencrypto-io/schema/tree/${tag.version}` }, tag.version)),\n          m('ul', tag.changes.map(ch => {\n            return m('li', m.trust(markdown.render(ch)))\n          }))\n        ])\n      })\n    ])\n  }\n}\n","var searchResult = null\nvar currentq = null\nvar searching = false\n\nfunction sObject (modelId, model, q, path = []) {\n  if (model.$id && path.length > 0) { return [] }\n  if (!model.properties) { return [] }\n\n  var res = []\n  Object.keys(model.properties).forEach(pk => {\n    const pv = model.properties[pk]\n    const re = new RegExp(q, 'i')\n    if (pk.match(re) || (pv.title && pv.title.match(re)) || (pv.description && pv.description.match(re))) {\n      res.push({ model: pk, property: pk, value: pv.title, description: pv.description })\n    }\n    let cr = []\n    switch (pv.type) {\n      case 'object':\n        cr = sObject(pk, pv, q, path.concat(modelId))\n        if (cr.length > 0) {\n          cr.forEach(ccr => {\n            res.push({ model: pk, description: ccr.description, property: [ pk, ccr.property ].join('.') })\n          })\n        }\n        break\n      case 'array':\n        if (pv.items && pv.items.type === 'object') {\n          cr = sObject(pk + '[]', pv.items, q, path.concat(modelId, '[]'))\n        }\n        if (cr.length > 0) {\n          cr.forEach(ccr => {\n            res.push({ model: pk, description: ccr.description, property: [ pk + '[]', ccr.property ].join('.') })\n          })\n        }\n        break\n    }\n  })\n  return res\n}\n\nfunction searchModel (model, q) {\n  //console.log('searching model \"%s\" for query \"%s\"', model.id, q)\n  let type = model.type || 'object'\n  return sObject(model.id, model.schema, q)\n}\n\nfunction doSearch (bundle, q) {\n  console.log('dosearch')\n  currentq = q\n\n  let res = []\n  Object.keys(bundle.models).forEach(mk => {\n    let model = bundle.models[mk]\n    res = res.concat(searchModel(model, q).map(r => { r.model = mk; return r }))\n  })\n\n  searchResult = res\n  searching = false\n  m.redraw()\n}\n\nmodule.exports = {\n  oninit (vnode) {\n    searching = true\n    this.bundlePromise = vnode.attrs.bundle()\n    this.bundlePromise.then((bundle) => {\n      this.bundle = bundle\n      m.redraw()\n    })\n    .then(() => doSearch(this.bundle, vnode.attrs.q))\n  },\n  onupdate (vnode) {\n    if (searching) {\n      return null\n    }\n    this.bundlePromise.then(() => {\n      if (vnode.attrs.q !== currentq) {\n        doSearch(this.bundle, vnode.attrs.q)\n      }\n    })\n  },\n  view (vnode) {\n    let res = null\n    const re = new RegExp(currentq, 'i')\n    const highlight = (str) => {\n      if (!str) return str\n      return m.trust(str.replace(re, (s) => `<span class=\"sf\">${s}</span>`))\n    }\n    if (searchResult && this.bundle) {\n      if (searchResult.length === 0) {\n        res = m('div', 'Nothing found')\n      } else {\n        res = m('.content', m('ul', searchResult.map(sr => {\n          return m('li.box', [\n            m('b', { class: 'far fa-'+this.bundle.models[sr.model].schema['fa-icon'], style: 'margin-right: 0.5em' }),\n            m('a', { href: `/model/${sr.model}`, oncreate: m.route.link, class: 'silent' }, `${sr.model}`),\n            m('span', ' → '),\n            m('span', highlight(sr.property)),\n            m('div', { style: 'color: rgb(153, 153, 153)' }, m('span', highlight(sr.description)))\n          ])\n        })))\n      }\n    }\n    return m('#search', [\n      m('.title.is-5', 'Search for \"'+vnode.attrs.q+'\"'),\n      res ? res : m('div', 'Loading ..')\n    ])\n  }\n}\n","const Layout = require('./components/Layout')\n\nconst Homepage = require('./components/Homepage')\nconst Schema = require('./components/Schema')\nconst Changelog = require('./components/Changelog')\nconst Search = require('./components/Search')\n\nconst root = document.getElementById('schema-explorer')\n\nconst isLocal = window.location.hostname === 'localhost'\nconst bundleUrl = isLocal ?\n  '/schema/build/bundle.json' : 'https://schema.opencrypto.io/build/bundle.json'\n\nvar loadedBundle = null\nvar loadingBundle = null\nvar bundlePromise = null\n\nfunction bundle() {\n  if (loadedBundle) {\n    return Promise.resolve(loadedBundle)\n  }\n  if (loadingBundle) {\n    return bundlePromise\n  }\n  loadingBundle = true\n  bundlePromise  = new Promise(resolve => {\n    m.request(bundleUrl, { background: true }).then(data => {\n      loadedBundle = data\n      loadedBundle.isLocal = isLocal\n      loadingBundle = false\n      console.log('Loaded from: %s', bundleUrl)\n      resolve(loadedBundle)\n    })\n  })\n  return bundlePromise\n}\n\nm.route(root, '/', {\n  '/': { render: (vnode) => m(Layout, { bundle }, m(Homepage, { bundle })) },\n  '/model/:id': { render: (vnode) => m(Layout, { bundle }, m(Schema, { bundle, id: vnode.attrs.id })) },\n  '/changelog': { render: (vnode) => m(Layout, { bundle }, m(Changelog, { bundle })) },\n  '/search/:q': { render: (vnode) => m(Layout, { bundle, q: vnode.attrs.q }, m(Search, { bundle, q: vnode.attrs.q })) },\n})\n"]}