{"version":3,"sources":["components/Layout.js","lib/changelog.js","lib/markdown.js","components/Homepage.js","components/Schema.js","components/Changelog.js","index.js"],"names":["module","exports","vnode","bundlePromise","attrs","bundle","then","redraw","m","href","arr","oncreate","route","link","class","get","style","allmodels","Object","keys","models","filter","mk","model","path","length","map","name","omodels","push","concat","isLocal","meta","version","children","window","location","hostname","changelogUrl","changelog","request","data","converter","showdown","Converter","text","makeHtml","changelogLib","require","markdown","load","modelViewPath","modelId","root","submodels","forEach","mod","parent","schema","sm","slice","tag","changes","ch","trust","render","currentId","schemaCache","exampleCache","example","id","title","p","out","description","properties","pk","po","type","JSON","stringify","Layout","Homepage","Schema","Changelog","document","getElementById","bundleUrl","loadedBundle","loadingBundle","Promise","resolve","background","log"],"mappings":"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","file":"src.cd86d23b.map","sourceRoot":"../src","sourcesContent":["\nmodule.exports = {\n  oninit: (vnode) => {\n    this.bundlePromise = vnode.attrs.bundle()\n    this.bundlePromise.then((bundle) => {\n      this.bundle = bundle\n      m.redraw()\n    })\n  },\n  view: (vnode) => {\n    return m('div', [\n      m('div', { 'style': 'padding-bottom: 5em;' },  [\n        m('nav#navbar.navbar', [\n          m('.container', [\n            m('.navbar-brand', [\n              m('a.navbar-item', { href: 'https://data.opencrypto.io/' }, [\n                m('#logo'),\n                m('#logo-text', [\n                  m('span.thin', 'Open'),\n                  'Crypto',\n                  m('span.green', 'Data'),\n                ])\n              ])\n            ]),\n            m('.navbar-menu', [\n              m('.navbar-start', [\n                m('a.navbar-item', { href: 'https://data.opencrypto.io' }, 'Homepage'), \n                m('a.navbar-item', { href: 'https://explorer.opencrypto.io' }, 'Explorer'), \n                m('a.navbar-item.current', { href: 'https://schema.opencrypto.io' }, 'Schema'), \n              ]),\n              m('.navbar-end', [\n                m('a.navbar-item', { href: '#' }, 'How to contribute?'), \n                m('a.navbar-item', { href: '#' }, 'FAQ'), \n              ])\n            ])\n          ])\n        ]),\n        m('nav#subbar.navbar', [\n          m('.container', [\n            m('.navbar-menu', [\n              m('.navbar-start', (() => {\n                let arr = [\n                  m('a.navbar-item.has-dropdown.is-hoverable', [\n                    m('a.navbar-link', 'Documentation'),\n                    m('.navbar-dropdown', [\n                      m('a.navbar-item', { href: '/', oncreate: m.route.link, class: m.route.get() === '/' ? 'selected' : null }, 'Introduction'),\n                      m('.navbar-divider'),\n                      m('a.navbar-item', { href: '/changelog', oncreate: m.route.link, class: m.route.get() === '/changelog' ? 'selected' : null }, 'Changelog'),\n                    ])\n                  ]),\n                  m('span.navbar-item', { style: 'font-size: 8px; color: silver;'  }, ' ● ')\n                ]\n                if (!this.bundle) {\n                  return arr\n                }\n                let allmodels = Object.keys(this.bundle.models)\n                let models = allmodels.filter((mk) => {\n                  let model = this.bundle.models[mk]\n                  return model.path.length < 3\n                }).map(mk => {\n                  let model = this.bundle.models[mk]\n                  let href = `/model/${mk}`\n                  return m('a.navbar-item', { href, oncreate: m.route.link, class: m.route.get() === href ? 'selected' : null }, model.name)\n                })\n                //console.log(models)\n                let omodels = allmodels.filter(mk => {\n                  let model = this.bundle.models[mk]\n                  return model.path.length >= 3\n                })\n                if (omodels.length > 0) {\n                  models.push(m('.navbar-item.has-dropdown.is-hoverable', [\n                    m('a.navbar-link', 'Other models'),\n                    m('.navbar-dropdown', omodels.map(mk => {\n                      let model = this.bundle.models[mk]\n                      let href = `/model/${mk}`\n                      return m('a.navbar-item', { href, oncreate: m.route.link, class: m.route.get() === href ? 'selected' : null }, model.name)\n                    }))\n                  ]))\n                }\n                return arr.concat(models)\n              })()),\n              m('.navbar-end', (() => {\n                if (!this.bundle) {\n                  return null\n                }\n                return m('.navbar-item', [\n                  m('div.select.is-rounded', [\n                    m('select', [\n                      m('option', this.bundle.isLocal ? `v${this.bundle.meta.version} (local)` : `v${this.bundle.meta.version} (latest)`)\n                    ])\n                  ])\n                ])\n              })())\n            ])\n          ])\n        ]),\n        m('.container.page-content', function() {\n          if (true) {\n            return m('#page', vnode.children)\n          }\n          return m('div', { style: 'padding: 2em;' }, 'Loading ..')\n        }())\n      ])\n    ])\n  }\n}\n","\nconst isLocal = window.location.hostname === 'localhost'\nconst changelogUrl = isLocal ?\n  '/schema/build/changelog.json' : 'https://schema.opencrypto.io/build/changelog.json'\n\nvar changelog = null\n\nmodule.exports = {\n  load () {\n    return m.request(changelogUrl).then((data) => {\n      return data\n    })\n  }\n}\n","const converter = new showdown.Converter()\n\nmodule.exports = {\n  render (text) {\n    return converter.makeHtml(text)\n  }\n}\n","\nconst changelogLib = require('../lib/changelog')\nconst markdown = require('../lib/markdown')\n\nconst isLocal = window.location.hostname === 'localhost'\nvar changelog = null\n\nmodule.exports = {\n  oninit: (vnode) => {\n    this.bundlePromise = vnode.attrs.bundle()\n    this.bundlePromise.then((bundle) => {\n      this.bundle = bundle\n      m.redraw()\n    })\n    changelogLib.load().then(data => {\n      changelog = data\n      m.redraw()\n    })\n  },\n  view: (vnode) => {\n    if (!this.bundle) {\n      return m('div', 'Loading')\n    }\n    let modelViewPath = (modelId, root = false) => {\n      let model = this.bundle.models[modelId]\n      let submodels = []\n      Object.keys(this.bundle.models).forEach((mod) => {\n        if (this.bundle.models[mod].parent === modelId) {\n          submodels.push(mod)\n        }\n      })\n      return m('li', [\n        !root ? m('i', { class: 'fa-li far fa-level-up', style: 'transform: rotate(90deg);' }) : null,\n        m('div', m('a', { href: `/model/${modelId}`, oncreate: m.route.link }, [\n          model.schema['fa-icon'] ? m('b', { class: 'far fa-'+model.schema['fa-icon'], style: 'margin-right: 0.5em; color: #808080;' }) : null,\n          model.name,\n        ])),\n        !submodels ? null : m('ul.fa-ul', { style: root ? 'margin-left: 3em;' : '' }, submodels.map((sm) => {\n          return modelViewPath(sm)\n        }))\n      ])\n    }\n\n    return m('#homepage', [\n      m('.level', [\n        m('.level-left', [\n          m('.title.is-3', [\n            m('b','OpenCrypto Schema'),\n            ` v${this.bundle.meta.version}`\n          ]),\n        ]),\n      ]),\n      m('.tile.is-parent', [\n        m('.tile.oc-box.is-5', [\n          m('.content', [\n            m('div', m('b', 'Models:')),\n            m('ul.schema-structure.main', Object.keys(this.bundle.models).map((mod) => {\n              if (this.bundle.models[mod].parent) {\n                return null\n              }\n              return modelViewPath(mod, true)\n            })),\n          ])\n        ]),\n        m('.tile', [\n          m('.content', [\n            m('.title.is-4', [\n              'Schemas for structured cryptocurrency-related data in ',\n              m('a', { href: 'https://json-schema.org/' }, 'JSON Schema'),\n              ' standard'\n            ]),\n            m('p', 'We created this schema, because we need normalized way how to create, transfer and store data about crypto-assets and related ecosystem.'),\n            m('p', 'Schema is divided to models by their purpose and it\\'s designed to be easy to understand and to encompass all data properties that is needed.'),\n            m('p', 'Open-sourced under MIT license.'),\n            m('p', [\n              'If you miss some property or have another issue to discuss, you can create a new ',\n              m('a', { href: 'https://github.com/opencrypto-io/schema/issues' }, 'Schema Issue'),\n              ' on GitHub.',\n            ]),\n            m('p', { style: 'margin-top: 2em; font-size: 1.2em;' }, [\n              m('a', { href: 'https://github.com/opencrypto-io/schema'}, [\n                m('i', { class: 'fab fa-github', style: 'margin-right: 0.5em;' }),\n                'GitHub repository',\n              ])\n            ])\n          ])\n        ]),\n      ]),\n      !changelog ? null : m('#changelog', [\n        m('.title.is-4', 'Changelog'),\n        changelog.slice(0,2).map(tag => {\n          if (!isLocal && tag.version === 'Unreleased') {\n            return null\n          }\n          return m('.content', [\n            m('.title.is-5', tag.version),\n            m('ul', tag.changes.map(ch => {\n              return m('li', m.trust(markdown.render(ch)))\n            }))\n          ])\n        }),\n        m('p', m('a', { href: '/changelog', oncreate: m.route.link }, 'Show full Changelog'))\n      ])\n      \n    ])\n  }\n}\n","var currentId = null\nvar schema = null\nvar schemaCache = {}\nvar exampleCache = {}\nvar example = null\n\nmodule.exports = {\n  oninit: (vnode) => {\n    this.bundlePromise = vnode.attrs.bundle()\n    this.bundlePromise.then((bundle) => {\n      this.bundle = bundle\n      this.model = this.bundle.models[vnode.attrs.id]\n      m.redraw()\n    })\n  },\n  onupdate: (vnode) => {\n    if (this.model && this.model.id !== vnode.attrs.id) {\n      this.model = this.bundle.models[vnode.attrs.id]\n      m.redraw()\n    }\n  },\n  view: (vnode) => {\n    if (!this.model) {\n      return m('div', 'Loading ...')\n    }\n    const schema = this.model.schema\n    return m('div', [\n      m('h2.my-title', [\n        schema['fa-icon'] ? m('i', { class: 'far fa-'+schema['fa-icon'], style: 'margin-right: 0.5em;' }) : null,\n        schema.title\n      ]),\n      m('.path', this.model.path.map(p => {\n        var out = [ m('a', { href: `/model/${p}`, oncreate: m.route.link }, this.bundle.models[p].name) ]\n        if (p !== this.model.id) {\n          out.push(m('b', { style: 'padding: 0 0.4em;' }, ' → '))\n        }\n        return out\n      })),\n      m('.description', schema.description), \n      m('.props', Object.keys(schema.properties).map(pk => {\n        let po = schema.properties[pk]\n        return m('.custom-box', [\n          m('div', [\n            m('b', pk),\n            m('span', '   '),\n            m('i', { style: 'padding-left: 0.5em; color: #999999;' }, '{' +po.type + '}')\n          ]),\n          po.title ? m('div', { style: 'color: #999999;' }, po.title + (po.description ? ' - ' + po.description : '')) : null,\n          this.model.example[pk] ? m('pre.example', JSON.stringify(this.model.example[pk], null, 2)) : null,\n        ])\n      }))\n    ])\n  }\n}\n","\nconst markdown = require('../lib/markdown')\nconst changelogLib = require('../lib/changelog')\n\nconst isLocal = window.location.hostname === 'localhost'\n\nvar changelog = null\n\nmodule.exports = {\n  oninit: (vnode) => {\n    this.bundlePromise = vnode.attrs.bundle()\n    this.bundlePromise.then((bundle) => {\n      this.bundle = bundle\n      m.redraw()\n    })\n    changelogLib.load().then(data => {\n      changelog = data\n      m.redraw()\n    })\n  },\n  view: (vnode) => {\n    if (!this.bundle || !changelog) {\n      return m('div', 'Loading ..')\n    }\n    return m('#changelog', [\n      m('.title.is-3', 'Changelog'),\n      changelog.map(tag => {\n        if (!isLocal && tag.version === 'Unreleased') {\n          return null\n        }\n        return m('.content', [\n          m('.title.is-5', m('a', { class: 'silent', href: `https://github.com/opencrypto-io/schema/tree/${tag.version}` }, tag.version)),\n          m('ul', tag.changes.map(ch => {\n            return m('li', m.trust(markdown.render(ch)))\n          }))\n        ])\n      })\n    ])\n  }\n}\n","const Layout = require('./components/Layout')\n\nconst Homepage = require('./components/Homepage')\nconst Schema = require('./components/Schema')\nconst Changelog = require('./components/Changelog')\n\nconst root = document.getElementById('schema-explorer')\n\nconst isLocal = window.location.hostname === 'localhost'\nconst bundleUrl = isLocal ?\n  '/schema/build/bundle.json' : 'https://schema.opencrypto.io/build/bundle.json'\n\nvar loadedBundle = null\nvar loadingBundle = null\nvar bundlePromise = null\n\nfunction bundle() {\n  if (loadedBundle) {\n    return Promise.resolve(loadedBundle)\n  }\n  if (loadingBundle) {\n    return bundlePromise\n  }\n  loadingBundle = true\n  bundlePromise  = new Promise(resolve => {\n    m.request(bundleUrl, { background: true }).then(data => {\n      loadedBundle = data\n      loadedBundle.isLocal = isLocal\n      loadingBundle = false\n      console.log('Loaded from: %s', bundleUrl)\n      resolve(loadedBundle)\n    })\n  })\n  return bundlePromise\n}\n\nm.route(root, '/', {\n  '/': { render: (vnode) => m(Layout, { bundle }, m(Homepage, { bundle })) },\n  '/model/:id': { render: (vnode) => m(Layout, { bundle }, m(Schema, { bundle, id: vnode.attrs.id })) },\n  '/changelog': { render: (vnode) => m(Layout, { bundle }, m(Changelog, { bundle })) },\n})\n"]}